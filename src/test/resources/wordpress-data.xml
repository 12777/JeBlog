<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
     xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
     xmlns:content="http://purl.org/rss/1.0/modules/content/"
     xmlns:dc="http://purl.org/dc/elements/1.1/"
     xmlns:atom="http://www.w3.org/2005/Atom"
     xmlns:wp="http://wordpress.org/export/1.2/">
  <channel>
    <title>RManniBucau.blog()</title>
    <link>http://rmannibucau.wordpress.com</link>
    <description>Yet another blog about TomEE and OpenEJB</description>
    <pubDate>Tue, 19 Mar 2013 21:55:51 +0000</pubDate>
    <language>en</language>
    <wp:wxr_version>1.2</wp:wxr_version>
    <wp:base_site_url>http://wordpress.com/</wp:base_site_url>
    <wp:base_blog_url>http://rmannibucau.wordpress.com</wp:base_blog_url>
    <wp:wp_author>
      <wp:author_login>admin</wp:author_login>
      <wp:author_email>admin@wp.com</wp:author_email>
      <wp:author_display_name><![CDATA[admin]]></wp:author_display_name>
      <wp:author_first_name><![CDATA[]]></wp:author_first_name>
      <wp:author_last_name><![CDATA[]]></wp:author_last_name>
    </wp:wp_author>
    <wp:wp_author>
      <wp:author_login>guest</wp:author_login>
      <wp:author_email>guest@wp.com</wp:author_email>
      <wp:author_display_name><![CDATA[guest]]></wp:author_display_name>
      <wp:author_first_name><![CDATA[]]></wp:author_first_name>
      <wp:author_last_name><![CDATA[]]></wp:author_last_name>
    </wp:wp_author>
    <wp:category>
      <wp:term_id>196534</wp:term_id>
      <wp:category_nicename>javaee</wp:category_nicename>
      <wp:category_parent></wp:category_parent>
      <wp:cat_name><![CDATA[JavaEE]]></wp:cat_name>
    </wp:category>
    <wp:category>
      <wp:term_id>90656734</wp:term_id>
      <wp:category_nicename>openejb-2</wp:category_nicename>
      <wp:category_parent></wp:category_parent>
      <wp:cat_name><![CDATA[OpenEJB]]></wp:cat_name>
    </wp:category>
    <wp:category>
      <wp:term_id>90656747</wp:term_id>
      <wp:category_nicename>tomee-2</wp:category_nicename>
      <wp:category_parent></wp:category_parent>
      <wp:cat_name><![CDATA[TomEE]]></wp:cat_name>
    </wp:category>
    <generator>http://wordpress.com/</generator>
    <cloud domain='rmannibucau.wordpress.com' port='80' path='/?rsscloud=notify' registerProcedure=''
           protocol='http-post'/>
    <image>
      <url>http://s2.wp.com/i/buttonw-com.png</url>
      <title>RManniBucau.blog()RManniBucau.blog()</title>
      <link>http://rmannibucau.wordpress.com</link>
    </image>
    <atom:link rel="search" type="application/opensearchdescription+xml" href="http://rmannibucau.wordpress.com/osd.xml"
               title="RManniBucau.blog()"/>
    <atom:link rel='hub' href='http://rmannibucau.wordpress.com/?pushpress=hub'/>
    <item>
      <title>Testing a JavaEE Application with OpenEJB and TomEE</title>
      <link>http://rmannibucau.wordpress.com/2012/05/03/testing-a-jee-application-with-openejb-and-tomee/</link>
      <pubDate>Thu, 03 May 2012 21:52:28 +0000</pubDate>
      <dc:creator>admin</dc:creator>
      <guid isPermaLink="false">http://rmannibucau.wordpress.com/?p=6</guid>
      <description></description>
      <content:encoded><![CDATA[Testing your application in your build is mandatory today. Not doing it simply means you don't know what you'll provide. That's why libraries like <a title="Arquillian" href="http://arquillian.org/" target="_blank">arquillian</a> are born. However <a title="OpenEJB" href="http://openejb.apache.org" target="_blank">openejb</a> always thought of it and the goal of this post is to share different ways to test an application with OpenEJB and TomEE.

<!--more-->
<h1>ApplicationComposer or build your application yourself</h1>

On the example page of OpenEJB website, you'll find more information about this feature: <a title="Application Compose" href="http://openejb.apache.org/examples-trunk/application-composer/README.html" target="_blank">application-composer</a>
<h1>EJBContainer or the standard JEE solution</h1>
The JEE6 specification defined the EJBContainer API. It is common to start programmatically a container specifying the application you want to deploy. OpenEJB implementation supports to deploy from the classpath. This feature is really useful for testing an application. Moreover, there is a hook that lets you easily inject beans and resources into the test class.

Here, the idea is to simply define 3 hooks : start of the container, shutdown of the container and injection :

[sourcecode language="java"]
@BeforeClass
public static void start() {
    container = EJBContainer.createEJBContainer();
}

@Before
public void inject() throws NamingException {
    container.getContext().bind(&quot;inject&quot;, this);
}

@AfterClass
public static void stop() {
    container.close();
}
[/sourcecode]

Then simply write your tests as usual, using injected fields.

Note for maven user: again, only openejb-core is mandatory. For JAX-RS or JAX-WS openejb-cxf-rs or openejb-cxf can be added.

Some more features with the EJBContainer :
<ul>
	<li>adding the EJBContainer to properties given to the EJBContainer. PROVIDER property can be set to tomee-embedded to use TomEE instead of OpenEJB (need tomee-embedded dependency)</li>
	<li>Using OpenEJB and adding openejb-cxf or openejb-cxf-rs (for JAX-WS or JAX-RS) you can set EJBContainer.APP_NAME to an url like name "webapp-name/" (don't forget to add openejb.embedded.remotable=true for remote features). If not done, the module name will be used (if you use maven, the default is the folder name of the artifact).</li>
</ul>
A sample of this can be found here: <a title="Rest On EJB" href="http://openejb.apache.org/examples-trunk/rest-on-ejb/README.html" target="_blank">rest-on-ejb</a> or <a title="Design By Contract" href="http://openejb.apache.org/examples-trunk/bean-validation-design-by-contract/README.html" target="_blank">design-by-contract</a>
<h1>OpenEJB JUnit Runner or the pre-arquillian way</h1>
Before Arquillian era, OpenEJB provided (ans still provides) a runner. It lets you do the same thing, such as the previous example, but without being aware of the container management.
]]></content:encoded>
      <excerpt:encoded><![CDATA[]]></excerpt:encoded>
      <wp:post_id>6</wp:post_id>
      <wp:post_date>2012-05-03 21:52:28</wp:post_date>
      <wp:post_date_gmt>2012-05-03 21:52:28</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>testing-a-jee-application-with-openejb-and-tomee</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password></wp:post_password>
      <wp:is_sticky>0</wp:is_sticky>
      <category domain="post_tag" nicename="arquillian"><![CDATA[arquillian]]></category>
      <category domain="category" nicename="javaee"><![CDATA[JavaEE]]></category>
      <category domain="post_tag" nicename="javaee-2"><![CDATA[javaee]]></category>
      <category domain="post_tag" nicename="junit"><![CDATA[junit]]></category>
      <category domain="post_tag" nicename="openejb"><![CDATA[openejb]]></category>
      <category domain="category" nicename="openejb-2"><![CDATA[OpenEJB]]></category>
      <category domain="post_tag" nicename="test"><![CDATA[test]]></category>
      <category domain="category" nicename="testing"><![CDATA[Testing]]></category>
      <category domain="post_tag" nicename="tomee"><![CDATA[tomee]]></category>
      <category domain="category" nicename="tomee-2"><![CDATA[TomEE]]></category>
      <wp:postmeta>
        <wp:meta_key>_edit_last</wp:meta_key>
        <wp:meta_value><![CDATA[31881782]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>jabber_published</wp:meta_key>
        <wp:meta_value><![CDATA[1336081950]]></wp:meta_value>
      </wp:postmeta>
    </item>
    <item>
      <title>TomEE: A war without dependencies?</title>
      <link>http://rmannibucau.wordpress.com/2013/03/15/tomee-a-war-without-dependencies/</link>
      <pubDate>Fri, 15 Mar 2013 07:35:47 +0000</pubDate>
      <dc:creator>guest</dc:creator>
      <guid isPermaLink="false">http://rmannibucau.wordpress.com/?p=657</guid>
      <description></description>
      <content:encoded><![CDATA[TomEE already supports to enrich an application with dependencies through ClassLoaderConfigurer configuration or using VirtualWebAppClassLoader of Tomcat. The first one has the drawback to be configured in the container and the second to not be very configurable/extensible.

That's why we now have jars.txt!

<!--more-->

The idea is simple: add jars.txt file to WEB-INF. The content will list dependencies. It can be file paths or urls (http, mvn by default).

Here a sample:

[sourcecode]
mvn:org.apache.deltaspike.core:deltaspike-core-api:0.3-incubating
mvn:org.apache.deltaspike.core:deltaspike-core-impl:0.3-incubating
[/sourcecode]

Note: if you are not using the provisining module of OpenEJB (using aether) mvn resolution will be done downloading from repo1 or a specified repo (mvn:http://myrepo.com!org.foo:bar:1.0).

Next step can be to get a maven plugin supporting or helping with the generation of such a file.]]></content:encoded>
      <excerpt:encoded><![CDATA[]]></excerpt:encoded>
      <wp:post_id>657</wp:post_id>
      <wp:post_date>2013-03-15 07:35:47</wp:post_date>
      <wp:post_date_gmt>2013-03-15 07:35:47</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>tomee-a-war-without-dependencies</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password></wp:post_password>
      <wp:is_sticky>0</wp:is_sticky>
      <category domain="post_tag" nicename="dependencies"><![CDATA[dependencies]]></category>
      <category domain="post_tag" nicename="maven"><![CDATA[maven]]></category>
      <category domain="category" nicename="openejb-2"><![CDATA[OpenEJB]]></category>
      <category domain="post_tag" nicename="tomee"><![CDATA[tomee]]></category>
      <category domain="category" nicename="tomee-2"><![CDATA[TomEE]]></category>
      <category domain="post_tag" nicename="war"><![CDATA[war]]></category>
      <wp:postmeta>
        <wp:meta_key>_wpas_mess</wp:meta_key>
        <wp:meta_value><![CDATA[#TomEE: A war without dependencies?]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>_edit_last</wp:meta_key>
        <wp:meta_value><![CDATA[31881782]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>jabber_published</wp:meta_key>
        <wp:meta_value><![CDATA[1363333301]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>email_notification</wp:meta_key>
        <wp:meta_value><![CDATA[1363333302]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>publicize_twitter_user</wp:meta_key>
        <wp:meta_value><![CDATA[rmannibucau]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>_wpas_done_1690785</wp:meta_key>
        <wp:meta_value><![CDATA[1]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>_publicize_done_external</wp:meta_key>
        <wp:meta_value><![CDATA[a:1:{s:7:"twitter";a:1:{i:323389863;b:1;}}]]></wp:meta_value>
      </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>_wpas_skip_1690785</wp:meta_key>
        <wp:meta_value><![CDATA[1]]></wp:meta_value>
      </wp:postmeta>
    </item>
  </channel>
</rss>
